/*! For license information please see main.9a55fcf7.js.LICENSE.txt */
(()=>{"use strict";var e={7004:(e,t,n)=>{var r=n(8853),i=n(5043),a=n(7950);function o(e){var t="https://62aee014-87df-4846-a0fa-78e485afb511.preview.emergentagent.com","/api");function yd(e){let{gmailAuthStatus:t,setGmailAuthStatus:n,sessionId:r,setMessages:i,checkGmailStatus:a,showDropPanel:o,setShowDropPanel:s,toggleTheme:l,isDarkTheme:u,exportChat:c,startNewChat:f,messages:h}=e;const d=Zu({gmailAuthStatus:t,setGmailAuthStatus:n,sessionId:r,setMessages:i,checkGmailStatus:a});return(0,Tt.jsxs)("div",{className:"chat-background h-screen text-white flex flex-col overflow-hidden",children:[(0,Tt.jsx)("header",{className:"glassy-header shadow-lg flex-shrink-0",children:(0,Tt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between relative z-10",children:[(0,Tt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Tt.jsxs)("div",{className:"logo-container",children:[(0,Tt.jsx)("img",{src:"/logo.svg",alt:"Elva AI Logo",className:"elva-logo",onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="flex"}}),(0,Tt.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 via-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",style:{display:"none"},children:"E"})]}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h1",{className:"text-3xl font-bold smooth-glow-title",children:"Elva AI"}),(0,Tt.jsx)(jt,{})]})]}),(0,Tt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Tt.jsx)(Ju,{showDropPanel:o,setShowDropPanel:s,toggleTheme:l,isDarkTheme:u,exportChat:c,startNewChat:f}),t.authenticated?(0,Tt.jsxs)("div",{className:"gmail-status-badge connected",children:[(0,Tt.jsx)("div",{className:"status-dot pulsing"}),(0,Tt.jsx)("span",{className:"status-text",children:"Connected"})]}):(0,Tt.jsx)("button",{onClick:t.authenticated?null:d.initiateGmailAuth,className:"circular-icon-btn ".concat(t.authenticated?"gmail-connected":t.credentialsConfigured?"gmail-ready":"gmail-error"),title:t.authenticated?"Gmail Connected \u2705":t.credentialsConfigured?"Connect Gmail":"Gmail credentials missing \u274c",disabled:t.authenticated||!t.credentialsConfigured,children:(0,Tt.jsxs)("div",{className:"connected-indicator",children:[(0,Tt.jsx)("img",{src:"https://images.unsplash.com/photo-1706879349268-8cb3a9ae739a?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1Nzd8MHwxfHNlYXJjaHwxZHxnbWFpbCUyMGxvZ308ZW58MHx8fHwxNzUzMjQ4NTQ1fDA&ixlib=rb-4.1.0&q=85",alt:"Gmail",className:"gmail-icon"}),t.authenticated&&(0,Tt.jsx)("div",{className:"connected-check",children:"\u2713"})]})})]})]})}),(0,Tt.jsx)("main",{className:"premium-chat-container",children:(0,Tt.jsx)($u,{sessionId:r,gmailAuthStatus:t,setGmailAuthStatus:n,messages:h,setMessages:i})})]})}const bd=function(){const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(h()),[a,o]=(0,i.useState)((()=>{const e=localStorage.getItem("elva-theme");return!e||"dark"===e})),[s,u]=(0,i.useState)({authenticated:!1,loading:!0,credentialsConfigured:!1,error:null,debugInfo:null}),[c,f]=(0,i.useState)(!1);function h(){const e=localStorage.getItem("elva-session-id");if(e)return e;const t="session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9);return localStorage.setItem("elva-session-id",t),t}const d=async()=>{try{const e=(await Ft.get("".concat(vd,"/gmail/status?session_id=").concat(n))).data;u({authenticated:e.authenticated||!1,loading:!1,credentialsConfigured:e.credentials_configured||!1,error:e.error||null,debugInfo:e})}catch(e){console.error("Gmail status check failed:",e),u({authenticated:!1,loading:!1,credentialsConfigured:!1,error:e.message,debugInfo:null})}};(0,i.useEffect)((()=>{const e=localStorage.getItem("elva-theme");!e||"dark"===e?(document.documentElement.classList.add("dark-theme"),document.documentElement.classList.remove("light-theme")):(document.documentElement.classList.add("light-theme"),document.documentElement.classList.remove("dark-theme"))}),[]),(0,i.useEffect)((()=>{(async()=>{await d(),await m(),0===e.length&&p()})()}),[n]),(0,i.useEffect)((()=>{const e=()=>{d()};return window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)}),[n]),(0,i.useEffect)((()=>{if(!s.loading&&e.length>0){const n=e.findIndex((e=>e.isWelcome));if(-1!==n){const r="Hi Buddy \ud83d\udc4b Good to see you! Elva AI at your service. Ask me anything or tell me what to do!",i=s.authenticated?"\n\n\ud83c\udf89 **Gmail is connected!** I can now help you with:\n\u2022 \ud83d\udce7 Check your Gmail inbox\n\u2022 \u2709\ufe0f Send emails\n\u2022 \ud83d\udce8 Read specific emails\n\u2022 \ud83d\udd0d Search your messages":s.credentialsConfigured?"\n\n\ud83d\udca1 **Tip:** Click 'Connect Gmail' above to access your email!":"\n\n\u26a0\ufe0f **Note:** Gmail integration is not configured. Contact support to enable email features.",a=l(l({},e[n]),{},{response:r+i}),o=[...e];o[n]=a,t(o)}}}),[s.authenticated,s.credentialsConfigured,s.loading]);const p=()=>{const e=s.authenticated?"\n\n\ud83c\udf89 **Gmail is connected!** I can now help you with:\n\u2022 \ud83d\udce7 Check your Gmail inbox\n\u2022 \u2709\ufe0f Send emails\n\u2022 \ud83d\udce8 Read specific emails\n\u2022 \ud83d\udd0d Search your messages":s.credentialsConfigured?"\n\n\ud83d\udca1 **Tip:** Click 'Connect Gmail' above to access your email!":"\n\n\u26a0\ufe0f **Note:** Gmail integration is not configured. Contact support to enable email features.",n={id:"welcome_"+Date.now(),response:"Hi Buddy \ud83d\udc4b Good to see you! Elva AI at your service. Ask me anything or tell me what to do!"+e,isUser:!1,isWelcome:!0,timestamp:new Date};t([n])},m=async()=>{try{const e=(await Ft.get("".concat(vd,"/history/").concat(n))).data.messages||[];0===e.length?p():t(e.map((e=>l(l({},e),{},{isUser:!1,timestamp:new Date(e.timestamp)}))))}catch(e){console.error("Error loading chat history:",e),p()}};return(0,Tt.jsx)(Xu,{children:(0,Tt.jsx)(yd,{gmailAuthStatus:s,setGmailAuthStatus:u,sessionId:n,setMessages:t,checkGmailStatus:d,showDropPanel:c,setShowDropPanel:f,toggleTheme:()=>{const e=!a;o(e),localStorage.setItem("elva-theme",e?"dark":"light"),e?(document.documentElement.classList.remove("light-theme"),document.documentElement.classList.add("dark-theme")):(document.documentElement.classList.remove("dark-theme"),document.documentElement.classList.add("light-theme"))},isDarkTheme:a,exportChat:()=>{try{console.log("\ud83d\udce4 Exporting chat to PDF...",e.length,"messages");const n=gd(e);if(n.success){console.log("\u2705 PDF export successful:",n.fileName);const e={id:"export_success_"+Date.now(),response:"\ud83d\udcc4 **Chat exported successfully!**\n\n"+"\ud83d\udcc1 **File**: ".concat(n.fileName,"\n")+"\ud83d\udcca **Messages**: ".concat(n.messageCount," messages exported\n")+"\u2728 **Format**: ".concat(n.enhanced?"Enhanced PDF with chat bubbles":"Standard PDF","\n\n")+"The file has been downloaded to your device. You can find it in your Downloads folder.",isUser:!1,isSystem:!0,timestamp:new Date};t((t=>[...t,e]))}else{console.error("\u274c PDF export failed:",n.error);const e={id:"export_error_"+Date.now(),response:"\u274c **Export failed**\n\n"+"Sorry, there was an issue exporting your chat to PDF: ".concat(n.error,"\n\n")+"Please try again or contact support if the issue persists.",isUser:!1,isSystem:!0,timestamp:new Date};t((t=>[...t,e]))}f(!1)}catch(n){console.error("\u274c PDF export module loading failed:",n);const r=e.filter((e=>!e.isSystem)).map((e=>{const t=e.timestamp?new Date(e.timestamp).toLocaleString():"",n=e.isUser?"You":"Elva AI",r=e.message||e.response||"";return"[".concat(t,"] ").concat(n,": ").concat(r)})).join("\n\n"),i=new Blob([r],{type:"text/plain"}),a=URL.createObjectURL(i),o=document.createElement("a");o.href=a,o.download="elva-chat-".concat((new Date).toISOString().split("T")[0],".txt"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a);const s={id:"export_fallback_"+Date.now(),response:"\ud83d\udcc4 **Chat exported as text file**\n\nPDF export encountered an issue, so your chat has been saved as a text file instead.\n"+"Check your Downloads folder for: elva-chat-".concat((new Date).toISOString().split("T")[0],".txt"),isUser:!1,isSystem:!0,timestamp:new Date};t((e=>[...e,s])),f(!1)}},startNewChat:()=>{localStorage.removeItem("elva-session-id");const e=h();r(e),t([]),f(!1)},messages:e})})};a.createRoot(document.getElementById("root")).render((0,Tt.jsx)(i.StrictMode,{children:(0,Tt.jsx)(bd,{})}))})();
//# sourceMappingURL=main.9a55fcf7.js.map